---
title: "BioLockJ Reproduced Figures"
author: "Alicia Sorgen"
output:
  html_document:
    toc: true
    code_folding: hide
---

```{r setup, include=FALSE}
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
```

# R Markdown

This R Markdown document produces the output for the manuscript figures and those reproduced using the BioLockJ pipeline.

```{r include = FALSE}
library(stringr)
pipeRoot = dirname(dirname(getwd()))
moduleDir = dirname(getwd())

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PCO"),"/output/Genus_PCO.png")
output <- paste0(moduleDir,"/resources/Genus_PCO.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "CompareStudies16S"),"/output/Genus_mainFigure1cd.png")
output <- paste0(moduleDir,"/resources/Genus_mainFigure1cd.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "CompareStudies16S"),"/output/Genus_coefficientsFromScatterPlots.png")
output <- paste0(moduleDir,"/resources/Genus_coefficientsFromScatterPlots.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "CompareStudies16S"),"/output/Genus_BoxPlotCorrelations.png")
output <- paste0(moduleDir,"/resources/Genus_BoxPlotCorrelations.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Genus_scatterPlots.png")
output <- paste0(moduleDir,"/resources/Genus_scatterPlots.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/SV_BS_Assal.png")
output <- paste0(moduleDir,"/resources/SV_BS_Assal.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Diversity.png")
output <- paste0(moduleDir,"/resources/Diversity.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Seq_scatterPlots.png")
output <- paste0(moduleDir,"/resources/Seq_scatterPlots.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Genus_HeatmapAndCluster.png")
output <- paste0(moduleDir,"/resources/Genus_HeatmapAndCluster.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Species_scatterPlots_MetagenomicsBSAndPalleja.png")
output <- paste0(moduleDir,"/resources/Species_scatterPlots_MetagenomicsBSAndPalleja.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Species_mainFigure3ab.png")
output <- paste0(moduleDir,"/resources/Species_mainFigure3ab.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Species_coefficientsFromScatterPlots_MetagenomicsBSAndPalleja.png")
output <- paste0(moduleDir,"/resources/Species_coefficientsFromScatterPlots_MetagenomicsBSAndPalleja.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Pathway_scatterPlots_MetagenomicsBSAndPalleja.png")
output <- paste0(moduleDir,"/resources/Pathway_scatterPlots_MetagenomicsBSAndPalleja.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Pathway_mainFigure3de.png")
output <- paste0(moduleDir,"/resources/Pathway_mainFigure3de.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/Pathway_coefficientsFromScatterPlots_MetagenomicsBSAndPalleja.png")
output <- paste0(moduleDir,"/resources/Pathway_coefficientsFromScatterPlots_MetagenomicsBSAndPalleja.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/performance_heatmap_randomForest.png")
output <- paste0(moduleDir,"/resources/performance_heatmap_randomForest.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/loso_performance_randomForest.png")
output <- paste0(moduleDir,"/resources/loso_performance_randomForest.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/performance_heatmap_lasso.png")
output <- paste0(moduleDir,"/resources/performance_heatmap_lasso.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/loso_performance_lasso.png")
output <- paste0(moduleDir,"/resources/loso_performance_lasso.png")
file.copy(from = input, to = output)

input <- paste0(pipeRoot,"/",str_subset(dir(pipeRoot), "PDF2png"),"/output/OportunisticPathogens.png")
output <- paste0(moduleDir,"/resources/OportunisticPathogens.png")
file.copy(from = input, to = output)
```

## Original Supplemental Figure 1


```{r out.width=400, out.height=400}
left = "SuppFig1.png"
right = "Diversity.png"

include_graphics(c(left, right))
```

Left (original): ` `r left` `                           
Right(reproduction): ` `r right` ` 

## Original Supplemental Figure 2

Not shown.  Multi-page supplement.

Files are `SuppFig2.png` (original) and `Genus_scatterPlots.png` (reproduction).


## Original Supplemental Figure 3

Not shown.  Multi-page supplement.

Files are `SuppFig3.png` (original) and `Seq_scatterPlots.png` (reproduction).


## Original Supplemental Figure 4

```{r out.width=400, out.height=400}
left = "SuppFig4.png"
right = "SV_BS_Assal.png"

include_graphics(c(left, right))
```

Left (original): ` `r left` `                          
Right(reproduction): ` `r right` ` 

## Original Supplemental Figure 5

Not shown.  Multi-page supplement.

Files are `SuppFig5.png` (original) and `Species_scatterPlots_MetagenomicsBSAndPalleja.png` (reproduction).


## Original Supplemental Figure 6

Not shown.  Multi-page supplement.

Files are `SuppFig6.png` (original) and `Pathway_scatterPlots_MetagenomicsBSAndPalleja.png` (reproduction).


## Original Supplemental Figure 7

```{r out.height=400}
top = "SuppFig7.png"
lowLeft = "performance_heatmap_randomForest.png"
lowRigth = "loso_performance_randomForest.png"

include_graphics(top)
```
```{r out.width=450}
include_graphics(c(lowLeft, lowRigth))
```

Top left and right (original): ` `r top` `                           
Lower left (reproduction): ` `r lowLeft` `                           
Lower tight (reproduction): ` `r lowRigth` ` 


```{r}
sessionInfo()
```

