---
title: "Figure 1"
author: "Alicia Sorgen and Ivory Blakley"
output:
  html_document:
    toc: true
    code_folding: hide
---

```{r setup, include=FALSE}
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
```

This is a side-by-side comparison between figures as they appear in the published work, and the corresponding figures that were re-generated on ` `r date()` `.

## Figure 4

```{r}
fig4 = file.path(getwd(), "MainFigure4.png")
origPanels = getwd()
include_graphics(fig4)
```

Now we'll compare individual panels to the output we just generated in this pipeline.  

The old and new may not be bit-for-bit identical.  There may some random seed that is used in a training step, or a difference in the font libraries available, graphics paramaters like resolution or image size may be different, the publication may have some manually curated labels that the script-generated image does not.  There are many acceptable reasons why a reproduction of a figure may not be identical to the original; but we expect that the core conclusion from the original will hold for the reproduction.

```{r}
pipeRoot <- dirname(dirname(getwd()))
# in docker, the $BLJ_PROJ folder is mapped to 'mnt/efs/pipelines'
showPipelineFile <- function(filePath){
    return(gsub(paste0(pipeRoot,"/"), "", filePath))
}
dir = file.path(dir(pipeRoot, pattern="FigPerformlasso", full.names=TRUE), "output")
origPanels = getwd()
```

The re-produced images are taken from modules under this folder:               
``r gsub("mnt/efs/pipelines/", "<BLJ_PROJ folder>", pipeRoot)``

### Panel A 

```{r out.width=675, out.height=475}
fileName="performance_heatmap_lasso.png"
left = file.path(origPanels, fileName)
right = file.path(dir, gsub(".png", ".pdf", fileName) )

include_graphics(c(left, right))
```

The left image comes from the publication.  The right image is the pipeline result file:            
``r showPipelineFile(right)``

### Panel B

```{r out.width=550, out.height=360}
fileName="loso_performance_lasso.png"
left = file.path(origPanels, fileName)
right = file.path(dir, gsub(".png", ".pdf", fileName))

include_graphics(c(left, right), auto_pdf = TRUE)
```

The left image comes from the publication.  The right image is the pipeline result file:            
``r showPipelineFile(right)``

```{r}
sessionInfo()
```

